# NewsQuant ê°ì„±ë¶„ì„ ê°œì„ ì•ˆ

> ì‘ì„±ì¼: 2026-02-08 | ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸: `scripts/diagnose_sentiment.py`

## 1. í˜„ì¬ ëª¨ë¸ ì§„ë‹¨ ìš”ì•½

### í•µì‹¬ ë¬¸ì œ
| ë¬¸ì œ | ìˆ˜ì¹˜ | ì˜í–¥ |
|------|------|------|
| ì¤‘ë¦½ ë¹„ìœ¨ ê³¼ë‹¤ | 58.4% (22,006/37,666ê±´) | ë³€ë³„ë ¥ ì‹¬ê° ë¶€ì¡± |
| ê¸ì • í¸í–¥ | í‰ê·  +0.055 | BUY ì‹œê·¸ë„ ê³¼ë‹¤ ë°œìƒ |
| ì˜ˆì¸¡ë ¥ ë¶€ì¬ | ê°ì„±â†”ìˆ˜ìµë¥  ìƒê´€ â‰ˆ 0 ë˜ëŠ” ìŒìˆ˜ | ì‹œê·¸ë„ ë¬´ì˜ë¯¸ |
| í›„í–‰ ì§€í‘œ | BUY ì¢…ëª© = ì´ë¯¸ ì˜¤ë¥¸ ì¢…ëª© | ê³ ì  ë§¤ìˆ˜ ìœ ë„ |
| ë°ì´í„° í’ˆì§ˆ | related_stocks íŒŒì‹± ì˜¤ë¥˜ ë‹¤ìˆ˜ | ì¢…ëª© ë§¤í•‘ ëˆ„ë½ |

### ì™œ ì—­ìƒê´€ì´ ë°œìƒí•˜ëŠ”ê°€?
1. **í›„í–‰ ë°˜ì˜**: ì£¼ê°€ê°€ ìƒìŠ¹ â†’ ì–¸ë¡ ì´ ê¸ì • ê¸°ì‚¬ ì‘ì„± â†’ ê°ì„± ê¸ì • â†’ BUY ì‹œê·¸ë„ â†’ ì´ë¯¸ ëŠ¦ìŒ
2. **ëª¨í˜¸ í‚¤ì›Œë“œ**: 'ê´€ì‹¬', 'ì£¼ëª©', 'ì´ìŠˆ' ë“±ì€ ë°©í–¥ì„±ì´ ì—†ì–´ ë…¸ì´ì¦ˆë§Œ ì¶”ê°€
3. **ë§¥ë½ ë¬´ì‹œ**: "ìƒìŠ¹ì„¸ êº¾ì—¬" â†’ 'ìƒìŠ¹' í‚¤ì›Œë“œ ê°ì§€ â†’ ê¸ì •ìœ¼ë¡œ ì˜¤ë¶„ë¥˜ (ë³µí•©í‘œí˜„ ì‚¬ì „ìœ¼ë¡œ ì¼ë¶€ ê°œì„ ë¨)
4. **ë³¼ë¥¨ íš¨ê³¼ ë¬´ì‹œ**: ë‰´ìŠ¤ê°€ ë§ë‹¤ = ê´€ì‹¬ ê³¼ì—´ = ì²œì¥ ì‹ í˜¸ì¼ ìˆ˜ ìˆìœ¼ë‚˜ í˜„ì¬ ë¬´ì‹œ

---

## 2. ë‹¨ê¸° ê°œì„ ì•ˆ (í‚¤ì›Œë“œ ì‚¬ì „ ê°œì„ )

### 2.1 ì œê±°/ì•½í™”í•´ì•¼ í•  í‚¤ì›Œë“œ

**ê¸ì • ì‚¬ì „ì—ì„œ ì œê±° ë˜ëŠ” ê°€ì¤‘ì¹˜ ëŒ€í­ í•˜í–¥:**
- `ê´€ì‹¬`, `ì£¼ëª©`, `ì¸ê¸°`, `í™”ì œ`, `ì´ìŠˆ` â†’ ë°©í–¥ì„± ì—†ìŒ, ë‹¨ìˆœ ê´€ì‹¬ë„
- `ì¸ìˆ˜`, `í•©ë³‘` â†’ í”¼ì¸ìˆ˜ ì¸¡ì€ ë¶€ì •ì¼ ìˆ˜ ìˆìŒ (ë§¥ë½ í•„ìš”)
- `ì¶œì‹œ` â†’ ì¤‘ë¦½ì  ì´ë²¤íŠ¸, ê·¸ ìì²´ë¡œ ê¸ì • ì•„ë‹˜

**ë¶€ì • ì‚¬ì „ì—ì„œ ì¬ê²€í† :**
- `ì´ìŠˆ`, `ë¬¸ì œ` â†’ ë„ˆë¬´ ì¼ë°˜ì , ì œê±° ê¶Œì¥
- `ê·œì œ` â†’ ì‚°ì—…ë³„ë¡œ ë‹¤ë¦„ (ì œê±°í•˜ê³  ë³µí•©í‘œí˜„ìœ¼ë¡œ ëŒ€ì²´)

### 2.2 ì¶”ê°€í•´ì•¼ í•  í‚¤ì›Œë“œ/íŒ¨í„´

**ì„ í–‰ ì§€í‘œì„± ê¸ì •:**
- `ìˆ˜ì£¼ ì”ê³  ì¦ê°€`, `ì‹ ê·œ ìˆ˜ì£¼`, `ê³µê¸‰ ë¶€ì¡±`, `í’ˆì ˆ`, `ëŒ€ê¸° ìˆ˜ìš”`
- `ê°€ì´ë˜ìŠ¤ ìƒí–¥`, `ì»¨ì„¼ì„œìŠ¤ ìƒíšŒ`, `ì–´ë‹ ì„œí”„ë¼ì´ì¦ˆ`
- `ìì‚¬ì£¼ ë§¤ì…`, `ë°°ë‹¹ í™•ëŒ€`

**ì„ í–‰ ì§€í‘œì„± ë¶€ì •:**
- `ìˆ˜ì£¼ ê°ì†Œ`, `ì¬ê³  ì¦ê°€`, `ê°€ë™ë¥  í•˜ë½`
- `ê°€ì´ë˜ìŠ¤ í•˜í–¥`, `ì»¨ì„¼ì„œìŠ¤ í•˜íšŒ`, `ì–´ë‹ ì‡¼í¬`
- `ìœ ìƒì¦ì`, `CB ë°œí–‰`, `ëŒ€ì£¼ì£¼ ë§¤ë„`

### 2.3 ê°€ì¤‘ì¹˜ ì¡°ì •

```python
# í˜„ì¬: ëª¨ë“  í‚¤ì›Œë“œ ë™ì¼ ê°€ì¤‘ì¹˜
# ê°œì„ ì•ˆ: ì¹´í…Œê³ ë¦¬ë³„ ì°¨ë“± ê°€ì¤‘ì¹˜

KEYWORD_WEIGHTS = {
    # ì‹¤ì  ê´€ë ¨ (ê°€ì¥ ë†’ì€ ì˜ˆì¸¡ë ¥)
    'earnings': 2.0,    # ì–´ë‹ì„œí”„ë¼ì´ì¦ˆ, ì‹¤ì ê°œì„  ë“±
    # ìˆ˜ê¸‰ ê´€ë ¨
    'supply_demand': 1.5,  # ìì‚¬ì£¼ë§¤ì…, ì™¸ì¸ë§¤ìˆ˜ ë“±  
    # ì „ë§/ì˜ê²¬
    'outlook': 1.0,     # ëª©í‘œê°€ìƒí–¥ ë“±
    # ì¼ë°˜ ì´ë²¤íŠ¸
    'event': 0.5,       # ì¶œì‹œ, MOU ë“±
    # ê´€ì‹¬ë„ (ì œê±° ë˜ëŠ” 0)
    'attention': 0.0,   # ê´€ì‹¬, ì£¼ëª©, í™”ì œ
}
```

---

## 3. ì¤‘ê¸° ê°œì„ ì•ˆ (í›„í–‰ ì§€í‘œ ë¬¸ì œ í•´ê²°)

### 3.1 ë‰´ìŠ¤ ë°œí–‰ ì‹œì  vs ì£¼ê°€ ë°˜ì˜ ì²´í¬

í•µì‹¬ ì•„ì´ë””ì–´: **ë‰´ìŠ¤ ë°œí–‰ ì „ ì´ë¯¸ ì£¼ê°€ê°€ ì›€ì§ì˜€ë‹¤ë©´ í•´ë‹¹ ë‰´ìŠ¤ì˜ ê°€ì¤‘ì¹˜ë¥¼ ë‚®ì¶˜ë‹¤.**

```python
def adjust_for_price_reaction(sentiment_score, stock_code, news_date):
    """ë‰´ìŠ¤ ë°œí–‰ ì „ ì£¼ê°€ ì›€ì§ì„ìœ¼ë¡œ ì´ë¯¸ ë°˜ì˜ ì—¬ë¶€ íŒë‹¨"""
    # ë‰´ìŠ¤ ë°œí–‰ ì „ 3ì¼ ìˆ˜ìµë¥  ê³„ì‚°
    prior_return = get_prior_return(stock_code, news_date, days=3)
    
    # ê¸ì • ë‰´ìŠ¤ì¸ë° ì´ë¯¸ ì£¼ê°€ê°€ ë§ì´ ì˜¬ëìœ¼ë©´ â†’ ì´ë¯¸ ë°˜ì˜ë¨
    if sentiment_score > 0 and prior_return > 0.03:  # 3% ì´ìƒ ìƒìŠ¹
        return sentiment_score * 0.3  # ê°€ì¤‘ì¹˜ 70% ê°ì†Œ
    
    # ë¶€ì • ë‰´ìŠ¤ì¸ë° ì´ë¯¸ ì£¼ê°€ê°€ ë§ì´ ë¹ ì¡Œìœ¼ë©´ â†’ ì´ë¯¸ ë°˜ì˜ë¨
    if sentiment_score < 0 and prior_return < -0.03:
        return sentiment_score * 0.3
    
    # ê¸ì • ë‰´ìŠ¤ì¸ë° ì£¼ê°€ê°€ ë¹ ì¡Œìœ¼ë©´ â†’ ì•„ì§ ë¯¸ë°˜ì˜, ê¸°íšŒ?
    if sentiment_score > 0 and prior_return < -0.01:
        return sentiment_score * 1.5  # ê°€ì¤‘ì¹˜ ìƒí–¥
    
    return sentiment_score
```

### 3.2 ë‰´ìŠ¤ ë³¼ë¥¨ì„ ì—­ë°œìƒ ì‹œê·¸ë„ë¡œ í™œìš©

```python
def volume_signal(stock_code, date, lookback=20):
    """ë‰´ìŠ¤ ë³¼ë¥¨ ê¸‰ì¦ì„ ê³¼ì—´ ì‹œê·¸ë„ë¡œ í™œìš©"""
    recent_count = get_news_count(stock_code, date, days=3)
    avg_count = get_avg_news_count(stock_code, date, days=lookback)
    
    if avg_count == 0:
        return 0
    
    volume_ratio = recent_count / avg_count
    
    # ë‰´ìŠ¤ 3ë°° ì´ìƒ ê¸‰ì¦ â†’ ê³¼ì—´ ê²½ê³  (contrarian signal)
    if volume_ratio > 3.0:
        return -0.3  # ë¶€ì • ì‹œê·¸ë„ ì¶”ê°€
    # ë‰´ìŠ¤ í‰ì†Œë³´ë‹¤ ì ì€ë° ì‹¤ì  í˜¸ì¡° â†’ ì €í‰ê°€ ê¸°íšŒ
    elif volume_ratio < 0.5:
        return 0.1  # ì•½í•œ ê¸ì •
    
    return 0
```

### 3.3 ì‹œê°„ ê°ì‡  (Time Decay)

```python
def time_decay_weight(hours_since_publish):
    """ì˜¤ë˜ëœ ë‰´ìŠ¤ì¼ìˆ˜ë¡ ê°€ì¤‘ì¹˜ ê°ì†Œ"""
    # 6ì‹œê°„ ë°˜ê°ê¸°
    return 0.5 ** (hours_since_publish / 6)
```

---

## 4. ì¥ê¸° ê°œì„ ì•ˆ (ML ëª¨ë¸ ë„ì…)

### 4.1 í˜„ì‹¤ì  ì„ íƒì§€

| ë°©ë²• | ì¥ì  | ë‹¨ì  | ë‚œì´ë„ |
|------|------|------|--------|
| **KcELECTRA fine-tuning** | í•œêµ­ì–´ íŠ¹í™”, ê°€ë²¼ì›€ | ë ˆì´ë¸” ë°ì´í„° í•„ìš” | â­â­â­ |
| **KoBERT** | ë²”ìš© í•œêµ­ì–´ NLP | GPU í•„ìš”, ë¬´ê±°ì›€ | â­â­â­â­ |
| **GPT API (few-shot)** | ë ˆì´ë¸” ë¶ˆí•„ìš”, ë¹ ë¥¸ ë„ì… | ë¹„ìš©, ë ˆì´í„´ì‹œ | â­â­ |
| **ê°ì„±ì‚¬ì „ ê°œì„  (í˜„ì¬)** | ê°„ë‹¨, í•´ì„ ê°€ëŠ¥ | í•œê³„ ëª…í™• | â­ |

### 4.2 ê¶Œì¥ ë¡œë“œë§µ

**Phase A: ì¦‰ì‹œ ì ìš© (1ì£¼)**
- í‚¤ì›Œë“œ ì‚¬ì „ ì •ë¦¬ (2.1~2.3)
- related_stocks íŒŒì‹± ë²„ê·¸ ìˆ˜ì •
- ë‰´ìŠ¤ ë³¼ë¥¨ ì—­ë°œìƒ ì‹œê·¸ë„ ì¶”ê°€

**Phase B: 2ì£¼ ë‚´ ì ìš©**
- ì£¼ê°€ ì„ ë°˜ì˜ ì²´í¬ ë¡œì§ (3.1)
- ì‹œê°„ ê°ì‡  (3.3)
- validate_signals.pyë¡œ ê°œì„  íš¨ê³¼ ì¸¡ì •

**Phase C: 1ê°œì›” ë‚´ (ì„ íƒ)**
- GPT API few-shot ê°ì„±ë¶„ì„ íŒŒì¼ëŸ¿ (100ê±´ í…ŒìŠ¤íŠ¸)
- ë˜ëŠ” KcELECTRAë¡œ ë‰´ìŠ¤ ê°ì„± ë¶„ë¥˜ê¸° í•™ìŠµ
  - í•™ìŠµ ë°ì´í„°: í˜„ì¬ DBì—ì„œ ê·¹ê¸ì •/ê·¹ë¶€ì • ë‰´ìŠ¤ ìˆ˜ì‘ì—… ë ˆì´ë¸”ë§ (500ê±´ ì •ë„)
  - `torch`, `transformers` ì„¤ì¹˜ í•„ìš” (í˜„ì¬ ë¯¸ì„¤ì¹˜)

### 4.3 GPT API í™œìš© ì˜ˆì‹œ (ê°€ì¥ ë¹ ë¥¸ ML ë„ì…)

```python
def gpt_sentiment(title, content_snippet):
    """GPTë¡œ ë‰´ìŠ¤ ê°ì„± + ì£¼ê°€ ì˜í–¥ íŒë‹¨"""
    prompt = f"""ë‹¤ìŒ í•œêµ­ ì£¼ì‹ ê´€ë ¨ ë‰´ìŠ¤ì˜ ì£¼ê°€ ì˜í–¥ì„ íŒë‹¨í•˜ì„¸ìš”.
    
ë‰´ìŠ¤ ì œëª©: {title}
ë‚´ìš© ìš”ì•½: {content_snippet[:200]}

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œë§Œ ë‹µí•˜ì„¸ìš”:
ë°©í–¥: [ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½]
ê°•ë„: [ê°•/ì¤‘/ì•½]
ì´ë¯¸ë°˜ì˜: [ì˜ˆ/ì•„ë‹ˆì˜¤]
ê·¼ê±°: [í•œ ì¤„]"""
    # OpenAI API í˜¸ì¶œ
    ...
```

---

## 5. ë‰´ìŠ¤ ë³¼ë¥¨ ê¸°ë°˜ ì‹œê·¸ë„ (ë…ë¦½ ì „ëµ)

í˜„ì¬ ê°ì„±ë¶„ì„ê³¼ ë³„ê°œë¡œ, **ë‰´ìŠ¤ ë³¼ë¥¨ ìì²´ë¥¼ ì‹œê·¸ë„ë¡œ ì‚¬ìš©**í•˜ëŠ” ì „ëµ:

### Attention Overflow (ê´€ì‹¬ë„ ê³¼ì—´) ì „ëµ
- íŠ¹ì • ì¢…ëª© ë‰´ìŠ¤ê°€ í‰ì†Œ ëŒ€ë¹„ 3ë°° ì´ìƒ â†’ **ê³¼ì—´ ê²½ê³ ** (ë§¤ë„ ê³ ë ¤)
- ë‰´ìŠ¤ ê±°ì˜ ì—†ëŠ” ì¢…ëª©ì—ì„œ ê°‘ìê¸° í˜¸ì¬ â†’ **ì´ˆê¸° ë°œêµ´** (ë§¤ìˆ˜ ê³ ë ¤)
- ë¶€ì • ë‰´ìŠ¤ í­ì£¼ í›„ ê°ì†Œ ì‹œì‘ â†’ **ë°”ë‹¥ ì‹ í˜¸** (ë§¤ìˆ˜ ê³ ë ¤)

### êµ¬í˜„ ìŠ¤ì¼ˆë ˆí†¤
```python
class VolumeSignalGenerator:
    def analyze(self, stock_code, date):
        counts = self.get_daily_counts(stock_code, lookback=30)
        today = counts[-1]
        avg = np.mean(counts[:-1]) if len(counts) > 1 else 0
        std = np.std(counts[:-1]) if len(counts) > 1 else 1
        
        z_score = (today - avg) / std if std > 0 else 0
        
        if z_score > 2.0:
            return {'signal': 'OVERHEATED', 'z': z_score}
        elif z_score < -1.0 and self.has_positive_news(stock_code, date):
            return {'signal': 'EARLY_DISCOVERY', 'z': z_score}
        return {'signal': 'NEUTRAL', 'z': z_score}
```

---

## 6. ê²°ë¡ 

í˜„ì¬ í‚¤ì›Œë“œ ê¸°ë°˜ ê°ì„±ë¶„ì„ì€ **í›„í–‰ ì§€í‘œ + ë‚®ì€ ë³€ë³„ë ¥**ìœ¼ë¡œ ì¸í•´ ì˜ˆì¸¡ë ¥ì´ ì—†ìœ¼ë©°, ì˜¤íˆë ¤ ì—­íš¨ê³¼(ê³ ì  ë§¤ìˆ˜)ë¥¼ ìœ ë°œí•©ë‹ˆë‹¤.

**ìµœìš°ì„  ê°œì„ :**
1. ğŸ”´ ëª¨í˜¸ í‚¤ì›Œë“œ ì œê±° â†’ ì¦‰ì‹œ ë…¸ì´ì¦ˆ ê°ì†Œ
2. ğŸ”´ ì£¼ê°€ ì„ ë°˜ì˜ ì²´í¬ â†’ í›„í–‰ ì§€í‘œ ë¬¸ì œ ì™„í™”
3. ğŸŸ¡ ë‰´ìŠ¤ ë³¼ë¥¨ ì—­ë°œìƒ ì‹œê·¸ë„ â†’ ìƒˆë¡œìš´ ì•ŒíŒŒ ì†ŒìŠ¤
4. ğŸŸ¢ ML ëª¨ë¸ (GPT/KcELECTRA) â†’ ê·¼ë³¸ì  ê°œì„ 

ì˜ˆìƒ íš¨ê³¼: Phase A+Bë§Œìœ¼ë¡œë„ BUY ì‹œê·¸ë„ì˜ ë²¤ì¹˜ë§ˆí¬ ëŒ€ë¹„ ì—´ë“± í˜„ìƒì„ ì¤‘ë¦½ ì´ìƒìœ¼ë¡œ ê°œì„  ê°€ëŠ¥.
